<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Simple Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>

<body>
    <div class="container m-4">
        <h2>CPRG 010 - Front-End web development using React.js</h2>
        <h2>Activity</h2>
        <h3>This is a full calculator</h3>

        <div class="row g-3 m-3">
            <div class="col">
                <input type="number" id="n1" class="form-control" placeholder="First Number" aria-label="First Number">
            </div>
            <div class="col">
                <input type="number" id="n2"" class=" form-control" placeholder="Second Number"
                    aria-label="Second Number">
            </div>
            <div class="col-1 d-grid  gap-2">
                <button class="btn btn-primary" onclick="calculate('*')"><b>*</b></button>
                <button class="btn btn-primary" onclick="calculate('/')"><b>/</b></button>
            </div>
            <div class="col-1 d-grid  gap-2">
                <button class="btn btn-primary" onclick="calculate('+')"><b>+</b></button>
                <button class="btn btn-primary" onclick="calculate('-')"><b>-</b></button>
            </div>
            <div class="col-2">
                <input type="text" id="result" readonly class="form-control" placeholder="000"
                    aria-label="Second Number">
            </div>

        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>

    <script>
        async function calculate(operator) {
            let n1text = document.getElementById('n1').value;
            let n2text = document.getElementById('n2').value;
            if (n1text == "" || n2text == "") return; // make sure we have values
            let values = {
                n1: parseFloat(n1text), // Convert them to numbers
                n2: parseFloat(n2text),
                operator
            };
            // Send AJAX request to the back-end API
            let response = await fetch('/activity-calc-api', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(values)
            });
            // Get and parse the response  JSON to Object
            let responseObj = await response.json();
            document.getElementById('result').value = responseObj.answer;
        }
    </script>
</body>

</html>